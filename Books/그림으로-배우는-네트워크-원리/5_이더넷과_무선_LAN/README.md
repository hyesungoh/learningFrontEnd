# 이더넷과 무선 LAN

## 같은 네트워크 내에서의 전송을 반복한다

* 다른 네트워크로의 통신은 같은 네트워크 내에서의 데이터 전송을 반복해 간다
* 같은 네트워크 내에서 전송하는 프로토콜로 자주 이용하는 것이 이더넷과 무선 LAN(Wi-Fi)

## 데이터를 전송하는 이더넷

* 이더넷은 TCP/IP의 네트워크 인터페이스층에 있는 프로토콜
* 이더넷은 같은 네트워크 내의 이더넷 인터페이스 사이에서 데이터를 전송하기 위한 프로토콜

## 이더넷의 규격

* 이더넷에는 다양한 규격이 있다
* 규격은 전송 속도와 전송 매체 특징을 나타내는 형태
  + 10BASE-T: 10Mbps / 베이스 밴드 방식 / 전송 매체 (T는 UTP 케이블)

## 인터페이스는 어느 것?

* MAC 주소는 이더넷 인터페이스에 미리 할당되어 있어, 기본적으로 변경할 수 없음
  + 물리 주소, 하드웨어 주소라고 부르는 경우도 있음

* MAC 주소는 전반 24비트의 OUI와 후반 24비트의 시리얼 넘버로 모두 48비트
  + 16진수로 표기
  + OUI는 인터페이스를 제조하는 메이커 식별 코드

## 일반적으로 사용되는 인터페이스와 케이블은?

* 널리 이용되는 이더넷 규격은 PJ-45 인터페이스와 UTP 케이블
* UTP 케이블은 품질에 따라 카테고리가 나뉨

## 데이터 형식

* 이더넷 헤더 안에는 아래 세 가지 정보가 있음
  + 목적지 MAC 주소
  + 출발지 MAC 주소
  + 타입 코드

* 타입 코드에 사용하는 수치는 정해져 있음
  + TCP/IP를 이용하므로 타입 코드로 IPv4를 나타내는 0x0800을 사용
  
* 이더넷 헤더와 데이터 부분 및 FCS를 모두 포함한 이더넷 프레임은 64~1518 바이트 범위

## 어떻게 접속하는가?

* 토폴로지
  + 수학에서 위상기하학이란느 분야를 의미
    - 도형의 연결 방식이나 위치 관계에 초점을 둔 학문 분야
  + 네트워크에서 기기를 연결하는 형태를 나타내는 말로도 이용

* 초기 이더넷은 버스형
  + 버스형은 하나의 전송 매체를 복수의 기기가 공유
  + 현재는 버스형 토폴로지에서 레이어2 스위치를 중심으로 하는 스타형 토폴로지로 옮겨가고 있음

## 데이터 전송 타이밍 제어

* 버스형 토폴로지로 된 이더넷에서는 복수의 기기가 동시에 데이터를 전송할 수 없음
  + 어떤 순간에 데이터를 전송할 수 있는 것은 단 한 대뿐

* CSMA/CD (Carrier Sense Multiple Access with Collision Detection)
  + 먼저 가는 쪽이 승리~

* 현재 이더넷에서는 CSMA/CD가 필요 없음
  + 현재는 전송 매체를 공유하지 않기 떄문

## 이더넷 네트워크를 만든다

* 레이어2 스위치
  + 이더넷을 이용한 네트워크 '하나'를 구성하는 네트워크 기기
  + 레이어2 스위치를 여러 대 연결해도 하나의 네트워크
  + 이더넷 프레임을 전송하기 위해 이더넷 헤더의 MAC 주소를 확인할 뿐 변경하지 않음

* VLAN
  + 레이어2 스위치로 복수의 네트워크를 만들 수 있음
  + 6장에서 설명

* 네트워크의 입구
  + 레이어2 스위치는 입구 역할도 함
  + 엑세스 스위치라고도 표현
  + 스위칭 허브라고도 표현

## 레이어2 스위치의 동작 1

1. 수신한 이더넷 프레임의 출발지 MAC 주소를 MAC 주소 테이블에 등록
2. 목적지 MAC 주소와 MAC 주소 테이블에서 전송할 포트를 결정해, 이더넷 프레임을 전송. 테이블에 존재하지 않는 주소의 경우 수신 포트를 제외한 모든 포트로 이더넷 프레임을 전송 (플러딩)

## 레이어2 스위치의 동작 2

* MAC 주소 테이블에 등록되지 않은 MAC 주소가 목적지로 되어 있는 이더넷 프레임을 Unknown 유니캐스트 프레임이라고 부름
  + 이는 수신한 포트를 제외한 모든 포트에 전송 - 플러딩

* 모르면 일단 전송해 둔다 <로 동작

## 레이어2 스위치의 동작 3

* 레이어2 스위치는 MAC 주소를 MAC 주소 테이블에 계속 등록하면서 이더넷 프레임을 전송해 감

## 레이어2 스위치의 동작 4

* 통신은 양방향
* 반환되는 이더넷 프레임은 원래 프레임의 목적지와 출발지 MAC 주소가 교체된 주소가 됨
* 저장되어 있으니 알잘딱 잘 감 (플러딩 X)

## MAC 주소 테이블 관리

* MAC 주소 정보는 포트가 바뀌거나 하는 경우가 있어서 영구적이지 않음
  + 그래서 제한 시간이 설정되어 있음
  + 제한 시간은 스위치 기기에 따라 다름, 대략 5분 정도

## 데이터 전송과 동시에 수신한다

* 레이어2 스위치 기반 이더네 네트워크는 송수신을 동시에 할 수 있음
  + 이를 전이중 통신이라 함
  + 반대는 반이중 통신
  + 초기 이더넷은 반이중 통신이였음

* 어떻게?
  + UTP 케이블은 한 줄처럼 보이지만, 실질적으로 4줄
  + 8줄의 구리선을 두 줄을 한 조로 꼬아서 4개의 전기 신호를 흘려 보낼 수 있음

## 케이블 없이 간편하게 네트워크를 만든다

* 무선 LAN에서는 케이블 배선 없이 간편하게 네트워크를 만들 수 있음

* 만들기 위해서는 무선 LAN 엑세스 포인트와 무선 LAN 인터페이스가 필요
  + 무선 LAN 인터페이스는 대부분 기기에 미리 내장되어 있음
  + 무선 LAN 인터페이스로 무선 LAN에 연결된 기기를 무선 LAN 클라이언트라고 부름

* 데이터 통신은 무선 LAN 엑세스 포인트를 경유
  + 이를 인프라스트럭처 모드라고 부름
  + 무선 LAN 인터페이스끼리 직접 데이터를 주고받는 애드훅 모드도 있음

## 무선 LAN에도 규격이 많다

* 규격의 커다란 차이는 이용하는 전파의 주파수 대역
  + 크게 2.4GHz 대역과 5GHz 대역

* 예전에는 무선 LAN 기기끼리 호환이 잘 되지 않았음
  + 그래서 Wi-Fi Alliance라는 업계 단체가 상호 접속성을 인증한 브랜드를 Wi-Fi라고 부름
  + 이떄문에 무선 LAN 자체를 Wi-Fi라고 표현하게 됨

## 무선 LAN에 연결한다

* 무선 LAN 엑세스 포인트에 연결해서 무선 LAN 링크를 확립해야 통신할 수 있음
  + 이를 어소시에이션이라고 부름

* 어소시에이션에는 SSID(Service Set Identifier)가 필요
  + SSID는 논리적인 그룹을 식별하는 식별정보
  + 무선 LAN 엑세스 포인트에는 미리 최대 32문자의 문자열로 SSID를 지정해 둠

## 전파는 돌려쓴다

* 새로운 무선 LAN 규격의 속도는 유선 이더넷과 손색이 없을 정도
  + 하지만 이는 최대 속도에 지나지 않음
  + 규격에서 정한 속도대로 통신할 수 있는 경우가 거의 없음
  + 대충 절반 정도임
  + 왜냐하면 전파를 돌려쓰기 때문
  + 초기 이더넷과 같음

* 주파수대의 전파를 채널이라고 함
  + 무선 LAN은 채널을 이용해 데이터를 전송
  + 복수의 클라이언트가 동시에 데이터를 전파에 실어 보내버리면 수신하는 쪽에서 데이터를 재구성할 수 없게 됨 (충돌)
  + 이를 방지하기 위해 CSMA/CA를 이용

## 충돌이 일어나지 않게 데이터를 전송한다

* CSMA는 단순히 빠른 쪽이 이기는 방식
  1. 전송하려 할 때 현재 전파가 이용 중인지 확인함
  2. 복수의 기기에서 미사용이라 판단할 수 있기 떄문에 이용 중이지 않아도 송신하지 않고 랜덤 시간 동안 대기
  3. 랜덤 시간동안 기다렸는데도 미사용이면 송신함
  4. 수신했으면 확인 ACK를 반환

## 무선 LAN의 보안

* 무선 LAN의 보안을 확보하기 위한 규격 중 현재 일반적으로 사용하는 것은 WPA2
