## Monolithic Architecture의 문제점

복잡한 코드

-   초반에 구축이 잘 되었어도 수 년 이상 운영이되면서 점차 스파게티 화 된다.
-   많은 양의 코드가 몰려 있어 개발자가 모두를 이해할 수 없다.

느린 배포

-   한 프로젝트의 덩치가 너무 커져서 어플리케이션 구동시간이 늘어나고 빌드, 배포 시간도 길어진다.
-   조그마한 수정사항이 있어도 전체를 다시 빌드하고 배포를 해야 한다.

확장이 어려움

-   기능 별 특성에 따라 리소스 요건이 서로 맞지 않아 리소스를 탄력적으로 확장하기 어렵다.

장애 전이

-   기능 간 복잡한 연결 구조 때문에 장애 추적이 어렵다.
-   장애가 발생한 기능으로 인해 다른 기능까지 동작하지 않는 장애 전파 현상이 나타난다.

기술 변경/신기술 적용 한계

-   기능 별로 적합한 기술, 언어, 프레임워크를 선택적으로 적용하기가 어렵다.

## MSA 정의

Micro Service Architecture는 독립적인 **배포 및 확징**이 가능한 단위인 마이크로서비스를 지원하는 아키텍처이며 마이크로서비스를 고객의 MSA 적용 목적에 최적화된 단위로 도출하고 설계하는 것이 핵심역량이다.

## 마이크로서비스의 이점

-   확장성
-   시스템 유지 관리 및 진화 용이성
-   민첩성 향상
-   빠른 빌드, 테스트, 릴리즈 주기
-   더 빠른 혁신
-   명확한 소유권 및 책임
-   기술적 자유

## 마이크로서비스의 원칙

-   분산화
-   독립적 배포
-   실패 격리
-   높은 관측ㄴ성

## 모놀리스를 마이크로서비스로

-   분해하기 간단한 서비스로 소규모로 시작
-   모놀리스에 대한 종속성 최소화
-   복잡한 종속성을 초기에 분할
-   자주 변경되는 기능 분리

**Big Bang**

-   현재 모놀리스를 여러 서비스로 다시 개발하는 방법
-   위험하고 실패로 끝나기 쉬우므로 지양해야 함

**Incrementally Refactoring**

-   하나의 큰 Application을 작은 서비스로 조금씩 쪼개가는 방법
-   시간이 지나면 모놀리스는 완전히 사라지게 됨

#### 분리 기준

-   업무 중심
-   확장성 / 장애대응 / 독립성 / 배포
-   효율적인 통신
-   변경 가능성
-   기술적 자유
-   트랜잭션과 일관성
-   조직

#### 분해 방법

스트랭글러 패턴을 사용한 마이그레이션

1. 점진적 마이그레이션
2. 특정 기능을 점진적으로 교체
3. 최종적으로 기능 대체

## AWS를 사용한 마이크로서비스 개발

-   컴퓨팅
    -   EC2
    -   Lambda
    -   Elastic Beanstalk
-   컨테이너
    -   Fargate
    -   ECS / EKS
-   메시징 / 대기열
    -   SNS
    -   SQS
-   데이터베이스
    -   DynamoDB (RDB보다 권장)
